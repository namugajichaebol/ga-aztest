name: actionAzWorkflowsWebApp

on:
  workflow_dispatch:

env:
  resource_group_name: CreatePrivateEndpointQS-rg
  webAppName: app-namugaji667
  artifactRetention: 1
  
jobs:
  validateWebAppDeploy:
    name: Display results
    runs-on: ubuntu-latest
    needs: azureWebAppDeploy
    steps:
      - uses: actions/checkout@v3
      
      - name: Download ${{ env.webAppName }}.json
        uses: actions/download-artifact@v3
        with:
          name: webAppNameObject
      
      - name: Print the final result
        shell: pwsh
        run: |
          $webApp = Get-Content ${{ env.webAppName }}.json -Raw | ConvertFrom-Json
          Invoke-WebRequest -Uri $webApp.DefaultHostName
          
